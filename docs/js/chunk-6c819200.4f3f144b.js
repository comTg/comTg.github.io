(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c819200"],{"00fe":function(t,e,n){},"054f":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.issue?i("div",{staticClass:"blog-detail-container"},[i("div",{staticClass:"title-container"},[i("span",{staticClass:"title"},[t._v(t._s(t.issue.title))]),i("ul",t._l(t.issue.labels,(function(e){return i("li",{key:e.id,staticClass:"tag tag-small",style:{backgroundColor:"#"+e.color},on:{click:function(n){return t.setActiveLabel(e)}}},[t._v(t._s(e.name)+" ")])})),0),i("span",{staticClass:"back",on:{click:t.back}},[i("img",{staticClass:"back-icon",attrs:{src:n("92c1")}}),t._v("返回 ")])]),i("div",{ref:"commentContainer",staticClass:"comment-container bga-back-top"},[i("comment",{attrs:{comment:t.issue}}),t._l(t.comments,(function(t){return i("comment",{key:t.id,attrs:{comment:t}})})),i("add-comment",{attrs:{commentsUrl:t.issue.comments_url},on:{addCommentSuccess:t.handleAddCommentSuccess}})],2)]):t._e()},s=[],o=n("5530"),a=(n("ac1f"),n("5319"),n("2f62")),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment"},[n("div",{staticClass:"comment-title"},[n("div",{on:{click:function(e){return t.openGitHub()}}},[n("img",{attrs:{src:t.comment.user.avatar_url}}),n("span",[t._v(t._s(t.comment.user.login))])]),n("span",{staticClass:"time"},[t._v(t._s(t.$moment(t.comment.created_at).format("YYYY-MM-DD HH:mm")))])]),n("article",{staticClass:"comment-body markdown-body",domProps:{innerHTML:t._s(t.renderedMarkdown)}})])},c=[],u={data:function(){return{renderedMarkdown:""}},props:["comment"],methods:{renderMarkdown:function(){this.renderedMarkdown="",this.comment.body_html?this.renderedMarkdown=this.comment.body_html:this.comment.body&&(this.renderedMarkdown=this.$marked(this.comment.body))},openGitHub:function(){window.open(this.comment.user.html_url)}},mounted:function(){var t=this;this.$nextTick((function(){t.renderMarkdown()}))}},m=u,d=(n("f57e"),n("2877")),l=Object(d["a"])(m,r,c,!1,null,"4691e77e",null),h=l.exports,f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"add-comment-container"},[n("div",{staticClass:"tab-container"},[n("ul",[n("li",{class:t.isWrite?"active":"",on:{click:function(e){t.isWrite=!0}}},[t._v("Write")]),n("li",{class:t.isWrite?"":"active",on:{click:t.renderMarkdown}},[t._v("Preview")])]),null==t.accessToken?n("div",[n("a",{attrs:{href:t.loginLink}},[t._v("Login")]),t._v(" with GitHub ")]):t._e()]),t.isWrite?n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newComment,expression:"newComment"}],attrs:{disabled:null==t.accessToken,rows:"5",placeholder:"说点什么？「支持 MarkDown 语法」"},domProps:{value:t.newComment},on:{input:function(e){e.target.composing||(t.newComment=e.target.value)}}}):n("article",{staticClass:"markdown-body",domProps:{innerHTML:t._s(t.renderedMarkdown)}}),n("button",{staticClass:"add-comment-btn",attrs:{disabled:t.commentBtnDisabled},on:{click:t.addComment}},[t._v("Comment ")])])},v=[],b=(n("498a"),n("99af"),{props:{commentsUrl:{type:String,required:!0}},data:function(){return{isWrite:!0,newComment:null,renderedMarkdown:"",isCommitting:!1}},computed:Object(o["a"])(Object(o["a"])({},Object(a["c"])(["accessToken","loginLink"])),{},{commentBtnDisabled:function(){return null==this.accessToken||this.isCommitting||null==this.newComment||0===this.newComment.trim().length}}),methods:Object(o["a"])(Object(o["a"])({},Object(a["b"])(["setAccessToken","setTokenUser"])),{},{renderMarkdown:function(){this.renderedMarkdown="Nothing to preview",this.newComment&&(this.renderedMarkdown=this.$marked(this.newComment)),this.isWrite=!1},fetchAccessToken:function(){var t=this,e=this.$queryParse();if(e.code){var n=e.code;delete e.code;var i="".concat(window.location.origin).concat(window.location.pathname).concat(this.$queryStringify(e)).concat(window.location.hash);history.replaceState(null,null,i),this.$gitHubApi.getAccessToken(this,n).then((function(e){e.data&&e.data.access_token&&t.setAccessToken(e.data.access_token)}))}},addComment:function(){var t=this;this.isCommitting=!0,this.$gitHubApi.addComment(this,this.commentsUrl,this.newComment.trim()).then((function(e){e.data&&e.data&&(t.$emit("addCommentSuccess",e.data),t.isWrite=!0,t.newComment=null,t.renderedMarkdown="",t.isCommitting=!1)})).catch((function(e){t.isCommitting=!1,e.response&&401===e.response.status&&t.setAccessToken(null)}))}}),mounted:function(){var t=this;this.$nextTick((function(){t.fetchAccessToken()}))}}),p=b,k=(n("8d0f"),Object(d["a"])(p,f,v,!1,null,"5f154bd6",null)),g=k.exports,w={name:"blog-detail",data:function(){return{issue:null,number:null,comments:[],newComment:null}},components:{Comment:h,AddComment:g},methods:Object(o["a"])(Object(o["a"])({},Object(a["b"])(["updateActiveLabel"])),{},{setActiveLabel:function(t){this.updateActiveLabel(t),this.$router.push("/")},getComments:function(){var t=this;this.issue&&this.issue.comments>0&&this.$gitHubApi.getComments(this,this.issue.comments_url).then((function(e){t.comments=e.data}))},getIssue:function(){var t=this;this.$gitHubApi.getIssue(this,this.number).then((function(e){t.issue=e.data,t.getComments()}))},back:function(){this.$router.go(-1)},handleAddCommentSuccess:function(t){var e=this;this.comments.push(t),this.$nextTick((function(){setTimeout((function(){var t=e.$refs.commentContainer;t.scrollTop=t.scrollHeight-t.clientHeight}),16)}))}}),created:function(){this.$route.params.issue?this.issue=this.$route.params.issue:this.$route.params.number?this.number=this.$route.params.number:this.$router.replace("/")},mounted:function(){var t=this;this.$nextTick((function(){t.issue?t.getComments():t.getIssue()}))}},C=w,$=(n("a8b5"),Object(d["a"])(C,i,s,!1,null,"6f7ebd03",null));e["default"]=$.exports},"0cb2":function(t,e,n){var i=n("e330"),s=n("7b0b"),o=Math.floor,a=i("".charAt),r=i("".replace),c=i("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,m=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,n,i,d,l){var h=n+t.length,f=i.length,v=m;return void 0!==d&&(d=s(d),v=u),r(l,v,(function(s,r){var u;switch(a(r,0)){case"$":return"$";case"&":return t;case"`":return c(e,0,n);case"'":return c(e,h);case"<":u=d[c(r,1,-1)];break;default:var m=+r;if(0===m)return s;if(m>f){var l=o(m/10);return 0===l?s:l<=f?void 0===i[l-1]?a(r,1):i[l-1]+a(r,1):s}u=i[m-1]}return void 0===u?"":u}))}},"15ec":function(t,e,n){},5319:function(t,e,n){"use strict";var i=n("2ba4"),s=n("c65b"),o=n("e330"),a=n("d784"),r=n("d039"),c=n("825a"),u=n("1626"),m=n("5926"),d=n("50c4"),l=n("577e"),h=n("1d80"),f=n("8aa5"),v=n("dc4a"),b=n("0cb2"),p=n("14c3"),k=n("b622"),g=k("replace"),w=Math.max,C=Math.min,$=o([].concat),_=o([].push),M=o("".indexOf),T=o("".slice),x=function(t){return void 0===t?t:String(t)},A=function(){return"$0"==="a".replace(/./,"$0")}(),y=function(){return!!/./[g]&&""===/./[g]("a","$0")}(),H=!r((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}));a("replace",(function(t,e,n){var o=y?"$":"$0";return[function(t,n){var i=h(this),o=void 0==t?void 0:v(t,g);return o?s(o,t,i,n):s(e,l(i),t,n)},function(t,s){var a=c(this),r=l(t);if("string"==typeof s&&-1===M(s,o)&&-1===M(s,"$<")){var h=n(e,a,r,s);if(h.done)return h.value}var v=u(s);v||(s=l(s));var k=a.global;if(k){var g=a.unicode;a.lastIndex=0}var A=[];while(1){var y=p(a,r);if(null===y)break;if(_(A,y),!k)break;var H=l(y[0]);""===H&&(a.lastIndex=f(r,d(a.lastIndex),g))}for(var O="",j=0,L=0;L<A.length;L++){y=A[L];for(var S=l(y[0]),W=w(C(m(y.index),r.length),0),I=[],D=1;D<y.length;D++)_(I,x(y[D]));var P=y.groups;if(v){var U=$([S],I,W,r);void 0!==P&&_(U,P);var Y=l(i(s,void 0,U))}else Y=b(S,r,W,I,P,s);W>=j&&(O+=T(r,j,W)+Y,j=W+S.length)}return O+T(r,j)}]}),!H||!A||y)},"8d0f":function(t,e,n){"use strict";n("a491")},"92c1":function(t,e,n){t.exports=n.p+"img/back-icon.d5d5824c.svg"},a491:function(t,e,n){},a8b5:function(t,e,n){"use strict";n("00fe")},f57e:function(t,e,n){"use strict";n("15ec")}}]);
//# sourceMappingURL=chunk-6c819200.4f3f144b.js.map